<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" integrity="sha512-PgQMlq+nqFLV4ylk1gwUOgm6CtIIXkKwaIHp/PAIWHzig/lKZSEGKEysh0TCVbHJXCLN7WetD8TFecIky75ZfQ==" crossorigin="anonymous" />
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
    
        <div class="container">
             <div class="header">
                  <h2>Registration Form</h2>
             </div>

             <form class="form" id="form">
                  <div class="form-control">
                      <label>
                          Username
                      </label>
                      <input type="text" name="" id="username" placeholder="Enter your full name" autocomplete="off">
                      <i class="fas fa-check-circle"></i>
                      <i class="fas fa-exclamation-circle"></i>
                      <small>Error message</small>
                  </div> 
                      
                  <div class="form-control">
                    <label>
                        email
                    </label>
                    <input type="Email" name="" id="email" placeholder="Enter your Email" autocomplete="off">
                    <i class="fas fa-check-circle"></i>
                    <i class="fas fa-exclamation-circle"></i>
                    <small>Error message</small>
                </div>

                <div class="form-control">
                    <label>
                        Phone Number
                    </label>
                    <input type="number" name="" id="number" placeholder="Enter your Phone number" autocomplete="off">
                    <i class="fas fa-check-circle"></i>
                    <i class="fas fa-exclamation-circle"></i>
                    <small>Error message</small>
                </div>
                <div class="form-control">
                    <label>
                        Password
                    </label>
                    <input type="password" name="" id="password" placeholder="Enter your password">
                    <i class="fas fa-check-circle"></i>
                    <i class="fas fa-exclamation-circle"></i>
                    <small>Error message</small>
                </div>

                <div class="form-control">
                    <label>
                         confirm password 
                    </label>
                    <input type="password" name="" id="cpassword" placeholder="Enter your password again">
                    <i class="fas fa-check-circle"></i>
                    <i class="fas fa-exclamation-circle"></i>
                    <small>Error message</small>
                </div>

                 <input type="submit" value="subm it" class="btn"  name=" " >

             </form>
        </div>
        <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

<Script type="text/javascript">
            const form= document.getElementById('form');
            const username= document.getElementById('username');
            const email= document.getElementById('email');
            const phone= document.getElementById('number');
            const password= document.getElementById('password');
            const cpassword= document.getElementById('cpassword');

            //add event

            form.addEventListener('submit',(event)=> {
                event.preventDefault();
                validate();
            })
         
               const sendData = (sRate , count) => {
                   if(sRate === count){
                       alert('registration successful');
                       swal("Welcome!", "registration successful", "success");
                   }
               }
          //for final data validation
           
           const SuccessMsg = () => {
               let formCon = document.getElementsByClassName('form-control');
                  var count = formCon.length - 1;
                for(var i = 0; i < formCon.length; i++) {

                    if(formCon[i].className === "form-control succes") {
                         var sRate = 0 + i;
                         console.log(sRate);
                     sendData(sRate, count);
                    } else {
                        return false;
                    }
                   
                }

           }

            /*more email validate
            const isEmail=(emailVal)=>{
                var atSymbol= emailVal/indexof("@");
                if(atSymbol<1) return false;
                var dot=emailVal.lastIndexof('.');
            
                if(dot <= atSymbol +2 )return false;
                if(dot===emailVal.length -1) return false;
                return true;
            }*/
          

            //define validate funtion
            const validate = () =>{

            const usernameVal = username.value.trim();
            const emailVal = email.value.trim();
            const phoneVal = number.value.trim();
            const passwordVal = password.value.trim();
            const cpasswordVal = cpassword.value.trim();
             
            //validate confirm password
            if(cpasswordVal===""){
                 setErrorMsg(cpassword,'phone number cannot be blank');

             }else if (cpasswordVal !== passwordVal)
            {
                setErrorMsg(cpasswordVal,'confirm password must be same');
             
            }else{
                setSuccessMsg(cpassword);
            }


            
            //validate passoword
            if(passwordVal===""){
                 setErrorMsg(password,'phone number cannot be blank');

             }else if (passwordVal.length<5)
            {
                setErrorMsg(passwordVal,'not a valid number');

            }else{
                setSuccessMsg(password);
            }

              //validate phone number
            if(phoneVal===""){
                 setErrorMsg(number,'phone number cannot be blank');

             }else if (phoneVal.length !=10)
            {
                setErrorMsg(phoneVal,'not a valid number');

            }else{
                setSuccessMsg(number);
            }

            //validate email
            if(emailVal===""){ 
                 setErrorMsg(email, "email cannot be blank");
             }
             /*
             else if(!isEmail(emailVal)) {
                setErrorMsg(emailVal, "not a valid email");
             }*/
             else{
                setSuccessMsg(email);
             }

             //validate username
             if(usernameVal===""){
                 setErrorMsg(username,"user name cannot be blank");
             }else if(usernameVal.length <=2){
                setErrorMsg(username,"user min 3 char");
             }else{
                setSuccessMsg(username);
             }
             

            function setErrorMsg(input, errormsgs){
                const formControl = input.parentElement;
                const small = formControl.querySelector('small');
                formControl.className="form-control error";
                small.innerText=errormsgs;

            }


            function setSuccessMsg(input){
                const formControl = input.parentElement;
                formControl.className="form-control success";
            }
        }

</Script>


</body>
</html>